<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clear</title>
</head>
<body>

<div id="div">
<h3>div</h3>
</div>
<button onclick="unbind()">
Unbind
</button>
<button onclick="remove()">
Remove
</button>
</body>
<script src="http://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
<script>
    var thing = null;
window.onload = function () {
    var _data = new Array(1e6).fill(0);

    var data = function () {
        if('true'){
            _data.pop()
        }
    };

    var option = {
        url:'/api',
        method:'POST',
        data:{
            data: _data
        },
        success: function (resp) {
            console.log()
        },
        error: function (resp) {
//            _data = null;
            //谨慎使用!!!!!
            //bind Evnet
//            document.getElementById('div').onclick = function () {
//                console.log('div click')
//            }

            //expose to global
//            thing = {
//                method: function () {
//                    console.log(method)
//                }
//            }
        }
    };
//    data()
    $.ajax(option)
};

function unbind() {
    console.log('unbind body');
    document.getElementById('div').onclick = null;
}
function remove() {
    console.log('unbind body');
    document.body.removeChild(document.getElementById('div'))
}
</script>
</html>