<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Dynamic venn.js example</title>
    <style>
        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div id="datum">
        <p>1</p>
        <p>2</p>
        <p>3</p>
    </div>

    <div id="data">
        <p>1</p>
        <p>2</p>
        <p>3</p>
    </div>
</body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
    // datum (value) 将数据绑定到选择集中的每一个元素上
    // data  ([values[,keys]]) 将每一个元素分别绑定values中每一项
    var datum_p = d3.select('#datum').selectAll('p')
    // console.log(
    datum_p
        .datum(7)
        .append('span')
        // 调用append后返回的是创建且加入后的span选择集
        // 且该span会继承__data__
        .text(function (d, i) {
            return d + ' ' + i
        })
    // );

    //.text(function (d, i) {
    //    return d + ' ' + i
    //})
    // console.log(datum_p)
    // _groups 选择集元素
    // _parents 父选择集
    // 绑定于__data__上
    // 调用text，数据及索引作为实参传入回调中

    var sets = [
        {
            id: 1,
            name: 'A'
        },
        {
            id: 2,
            name: 'B'
        },
        {
            id: 3,
            name: 'C'
        }]
    var data_p = d3.select('#data').selectAll('p')
    // 返回update对象 - 存在Update - Enter - Exit等概念
    // 数据多的为 Enter 即将进入
    // 数据少的为 Exit  即将退出
    // 数据存在的为 update 即将更新
    // 通过enter 、 exit获取对应数据及元素选择集


    data_p.data(sets)
    // 更新数据，打乱顺序
    // 可传递函数用于指定相等的键做数据绑定
    sets = [
        {
            id: 3,
            name: 'C'
        },
        {
            id: 2,
            name: 'B'
        },
        {
            id: 1,
            name: 'A'
        }
    ]
    
    // 针对 enter 一般插入元素
    // 针对 exit  一般删除元素
    // 故一般更新数据后分开处理 update - enter - exit 三部分
    var update , 
        enter , 
        exit;
    // update.text
    // enter.append.text
    // exit.remove
</script>

</html>